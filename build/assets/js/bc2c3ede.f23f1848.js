"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6386],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),l=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||o;return n?i.createElement(h,r(r({ref:t},u),{},{components:n})):i.createElement(h,r({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<o;l++)r[l]=n[l];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1982:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return d}});var i=n(3117),a=n(102),o=(n(7294),n(3905)),r=["components"],s={sidebar_position:7},c="sesamy-content-container",l={unversionedId:"products/web-components/sesamy-content-container",id:"products/web-components/sesamy-content-container",title:"sesamy-content-container",description:"The content container component displays either the locked preview version of the content or the the actual content depending on if the user has access.",source:"@site/docs/products/web-components/sesamy-content-container.md",sourceDirName:"products/web-components",slug:"/products/web-components/sesamy-content-container",permalink:"/docs/products/web-components/sesamy-content-container",draft:!1,editUrl:"https://github.com/sesamyab/docs/blob/dev/docs/products/web-components/sesamy-content-container.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Javascript API",permalink:"/docs/products/web-components/javascript-api"},next:{title:"sesamy-content-data",permalink:"/docs/products/web-components/sesamy-content-data"}},u={},d=[{value:"Usage",id:"usage",level:2},{value:"Basic usage",id:"basic-usage",level:3},{value:"Passing custom attributes",id:"passing-custom-attributes",level:2},{value:"Publisher content ID",id:"publisher-content-id",level:3},{value:"Public",id:"public",level:3},{value:"Lock Modes",id:"lock-modes",level:3},{value:"Event lock mode",id:"event-lock-mode",level:3},{value:"Event payload structure",id:"event-payload-structure",level:4},{value:"- <code>signedURL</code> (<code>String</code>)",id:"--signedurl-string",level:5},{value:"- <code>itemSrc</code> (<code>String</code>)",id:"--itemsrc-string",level:5},{value:"Pass",id:"pass",level:3},{value:"Access Url",id:"access-url",level:3},{value:"Receipt Link",id:"receipt-link",level:3},{value:"Gradient",id:"gradient",level:3}],p={toc:d};function m(e){var t=e.components,n=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"sesamy-content-container"},"sesamy-content-container"),(0,o.kt)("p",null,"The content container component displays either the locked preview version of the content or the the actual content depending on if the user has access."),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("h3",{id:"basic-usage"},"Basic usage"),(0,o.kt)("p",null,"The content container can be used purely client side or by fetching the locked content from the server."),(0,o.kt)("p",null,"The content container matches the current url against the user's purchases. In client side mode it displays the content from the preview of the content slot depending on if the user has access."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<html>\n  <head></head>\n  <body>\n    <sesamy-content-container>\n      <div slot="preview">\n        <p>Preview content</p>\n      </div>\n      <div slot="content">\n        <p>\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut ut nunc\n          ante. Proin dignissim non diam a iaculis. Vivamus nec tincidunt nisl.\n          Curabitur vel vehicula felis. Donec iaculis tincidunt varius.\n          Curabitur tincidunt varius purus, a malesuada quam fermentum eleifend.\n          Maecenas eget lorem justo.\n        </p>\n      </div>\n    </sesamy-content-container>\n\n    <script\n      defer\n      src="https://assets.sesamy.com/scripts/web-components/sesamy-content-container.min.js"\n    ><\/script>\n  </body>\n</html>\n')),(0,o.kt)("h2",{id:"passing-custom-attributes"},"Passing custom attributes"),(0,o.kt)("h3",{id:"publisher-content-id"},"Publisher content ID"),(0,o.kt)("p",null,"The ID of the content on the publisher side. It can be used to fetch data about the content from a ",(0,o.kt)("a",{parentName:"p",href:"/docs/news-widget/web-components/sesamy-content-data.md"},"sesamy-content-data")," web component with a matching ID."),(0,o.kt)("h3",{id:"public"},"Public"),(0,o.kt)("p",null,"By setting the public property the article will be unlocked for all users."),(0,o.kt)("h3",{id:"lock-modes"},"Lock Modes"),(0,o.kt)("p",null,"There are three different flows for the displaying the locked content once the ",(0,o.kt)("inlineCode",{parentName:"p"},"sesamy-content-conainer")," is unlocked:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If the attribute ",(0,o.kt)("inlineCode",{parentName:"li"},'lock-mode="embed"')," (default behavior): the locked content is fetched from the content slot as in the example above."),(0,o.kt)("li",{parentName:"ul"},"If the attribute ",(0,o.kt)("inlineCode",{parentName:"li"},'lock-mode="signedUrl"'),": the content is fetched from the publisher's server using a signed url."),(0,o.kt)("li",{parentName:"ul"},"If the attribute ",(0,o.kt)("inlineCode",{parentName:"li"},'lock-mode="event'),": an event is being emitted that could for instance be used to integrate with existing paywall solutions.")),(0,o.kt)("h3",{id:"event-lock-mode"},"Event lock mode"),(0,o.kt)("p",null,"If the ",(0,o.kt)("inlineCode",{parentName:"p"},'lock-mode="event"')," is used, once the checkout flow is finished and the item was succesfully purchased, instead of displaying the unlocked content, a custom event ",(0,o.kt)("inlineCode",{parentName:"p"},"sesamyAccess")," will be dispatched. The ",(0,o.kt)("inlineCode",{parentName:"p"},"detail")," property of the event will contain the information regarding the unlocked article."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<script>\n  document.addEventListener("sesamyAccess", function (e) {\n    console.log(e.detail);\n  });\n<\/script>\n')),(0,o.kt)("h4",{id:"event-payload-structure"},"Event payload structure"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"detail")," property of the ",(0,o.kt)("inlineCode",{parentName:"p"},"sesamyAccess")," event will contain an object with two properties:"),(0,o.kt)("h5",{id:"--signedurl-string"},"- ",(0,o.kt)("inlineCode",{parentName:"h5"},"signedURL")," (",(0,o.kt)("inlineCode",{parentName:"h5"},"String"),")"),(0,o.kt)("p",null,"The signed url with the unlocked content."),(0,o.kt)("h5",{id:"--itemsrc-string"},"- ",(0,o.kt)("inlineCode",{parentName:"h5"},"itemSrc")," (",(0,o.kt)("inlineCode",{parentName:"h5"},"String"),")"),(0,o.kt)("p",null,"An item source (url or sku) that identifies the purchased item."),(0,o.kt)("h3",{id:"pass"},"Pass"),(0,o.kt)("p",null,"The pass property is a semi-colon concatenated list of the ",(0,o.kt)("a",{parentName:"p",href:"/docs/news-widget/passes.md"},"passes")," that the article is part of."),(0,o.kt)("h3",{id:"access-url"},"Access Url"),(0,o.kt)("p",null,"When using the ",(0,o.kt)("inlineCode",{parentName:"p"},"lock-mode=signedUrl")," lock mode the content is fetched from the server. By default it fetches the locked content from the article url using the signed url, but depending on how the content is hosted it can be more convenient to fetch the locked content from a separate api path. By specifying the ",(0,o.kt)("inlineCode",{parentName:"p"},"access-url")," property on the content-container it will use this url to fetch the locked content and pass the signed url in the ",(0,o.kt)("inlineCode",{parentName:"p"},"x-sesamy-signed-url")," header instead:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'<sesamy-content-container\n    lock-mode="signedUrl"\n    access-url="https://example.com/api/access/test-article"\n>\n')),(0,o.kt)("h3",{id:"receipt-link"},"Receipt Link"),(0,o.kt)("p",null,"This message is shown below the article once it is unlocked, it contains a link to the confirmation screen of the checkout where te item was purchased.\nIt can be configured by setting the attribute ",(0,o.kt)("inlineCode",{parentName:"p"},"receipt-link")," in the sesamy-content-container tag (",(0,o.kt)("inlineCode",{parentName:"p"},'<sesamy-content-container receipt-link="none">'),")."),(0,o.kt)("p",null,"The following options are available for the ",(0,o.kt)("inlineCode",{parentName:"p"},"receipt-link")," attribute:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Text (default) (",(0,o.kt)("inlineCode",{parentName:"li"},'receipt-link="text"'),"): Displays a ",(0,o.kt)("inlineCode",{parentName:"li"},"powered by Sesamy")," message"),(0,o.kt)("li",{parentName:"ul"},"Embed (",(0,o.kt)("inlineCode",{parentName:"li"},'receipt-link="embed"'),"): Displays a receipt in an embedded window"),(0,o.kt)("li",{parentName:"ul"},"None (",(0,o.kt)("inlineCode",{parentName:"li"},'receipt-link="none"'),"): Removes the receipt link message")),(0,o.kt)("p",null,"The styling of the unlocked message can be configured with the following css variables:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<style>\n  sesamy-content-container {\n    --unlock-message-flex-direction: column; // default value is `row`\n    --unlock-message-align-items: flex-start; // default value is `center`\n  }\n</style>\n")),(0,o.kt)("p",null,"The language of the unlock message is defined by the lang attribute on the html tag:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<html lang="en">\n  \u2026\n</html>\n')),(0,o.kt)("p",null,"If no language is specified the language will default to english."),(0,o.kt)("h3",{id:"gradient"},"Gradient"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"sesamy-content-container")," can show a gradient over the preview content by adding a gradient property to the tag."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<html>\n  <head></head>\n  <body>\n    <sesamy-content-container gradient>\n      <div slot="preview">\n        <p>Preview content</p>\n      </div>\n      <div slot="content">\n        <p>\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut ut nunc\n          ante. Proin dignissim non diam a iaculis. Vivamus nec tincidunt nisl.\n          Curabitur vel vehicula felis. Donec iaculis tincidunt varius.\n          Curabitur tincidunt varius purus, a malesuada quam fermentum eleifend.\n          Maecenas eget lorem justo.\n        </p>\n      </div>\n    </sesamy-content-container>\n\n    <script\n      defer\n      src="https://assets.sesamy.com/scripts/web-components/sesamy-content-container.min.js"\n    ><\/script>\n  </body>\n</html>\n')))}m.isMDXComponent=!0}}]);